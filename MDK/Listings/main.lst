C51 COMPILER V9.60.0.0   MAIN                                                              11/29/2022 09:22:50 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE ..\USER\main.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\BSP;..\BSP\bsp_key;..\
                    -USER;..\BSP\bsp_lcd1602;..\middleware;..\middleware\EventHandler;..\BSP\DS1302;..\USER\timer) DEBUG OBJECTEXTEND PRINT(.
                    -\Listings\main.lst) OBJECT(.\Objects\main.obj)

line level    source

   1          /*
   2           * @Author: liubotao
   3           * @Date: 2022-08-29 16:37:40
   4           * @LastEditors: liubotao
   5           * @LastEditTime: 2022-11-29 09:22:45
   6           * @FilePath: \test_51\USER\main.c
   7           * @Description: ¾ØÕó°´¼ü¼ì²â
   8           *
   9           */
  10          #include "reg51.h"
  11          #include "bsp.h"
  12          //#include "fifo.h"
  13          #include "EventHandler.h"
  14          
  15          extern EVEN_T  myevent;
  16          extern TIMER_T  timer;
  17          extern uint8_t KeyVal;        
  18          
  19          
  20          uint8_t KEY_1_DownMessage()
  21          {
  22   1              static uint8_t KeyValue_1;
  23   1              if (KeyVal == KEY_1_DOWN)
  24   1              {
  25   2                      KeyValue_1=eNABLE;
  26   2                      KeyVal = KEY_1_UP;
  27   2              }
  28   1      
  29   1              if (KeyVal == KEY_1_UP&&KeyValue_1==eNABLE)
  30   1              {
  31   2                      KeyValue_1=dISABLE;
  32   2                      return eNABLE;  
  33   2              }       
  34   1              else
  35   1                      return dISABLE;
  36   1      
  37   1      }
  38          uint8_t KEY_1_LongMessage()
  39          {
  40   1              static uint8_t KeyValue_2;
  41   1              if (KeyVal == KEY_1_LONG)
  42   1              {
  43   2                      KeyValue_2=eNABLE;
  44   2                      KeyVal = KEY_1_UP;
  45   2              }
  46   1              if (KeyVal == KEY_1_UP && KeyValue_2 == eNABLE)
  47   1              {
  48   2                      KeyValue_2 = dISABLE;
  49   2                      return eNABLE;
  50   2              }
  51   1              else
  52   1                      return dISABLE;
  53   1      }
C51 COMPILER V9.60.0.0   MAIN                                                              11/29/2022 09:22:50 PAGE 2   

  54          
  55          uint8_t timeadd(void)
  56          {
  57   1              addIncident(&timer);
  58   1              return 0;
  59   1      }
  60          uint8_t timeNumber=0;
  61          
  62          uint8_t timeSwitch(void)
  63          {
  64   1              if (timeNumber > 0)
  65   1              {
  66   2              switchIncident(&timer);
  67   2                      
  68   2              }
  69   1          else modeIncident(&timer);
  70   1              timeNumber++;   
  71   1              if (timeNumber > 6)
  72   1              {
  73   2              modeIncident(&timer);
  74   2                      timeNumber = 0;
  75   2              }
  76   1      
  77   1      }
*** WARNING C173 IN LINE 77 OF ..\USER\main.c: missing return-expression
  78          
  79          
  80          int main()
  81          {
  82   1              EnevHancleInit(&myevent);
  83   1          evenConnector(&myevent,
  84   1                    KEY_1_LongMessage,
  85   1                    timeSwitch,
  86   1                    0);
  87   1          evenConnector(&myevent,
  88   1                    KEY_1_DownMessage,
  89   1                    timeadd,
  90   1                    1);
  91   1              bspInit();
  92   1              while (1);
  93   1      }
  94              
*** WARNING C290 IN LINE 77 OF ..\USER\main.c: missing return value


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    200    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  2 WARNING(S),  0 ERROR(S)
