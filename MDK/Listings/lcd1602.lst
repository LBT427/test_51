C51 COMPILER V9.60.0.0   LCD1602                                                           11/27/2022 18:47:33 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN .\Objects\lcd1602.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE ..\BSP\bsp_lcd1602\lcd1602.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\BSP;..\B
                    -SP\bsp_key;..\USER;..\BSP\bsp_lcd1602;..\middleware;..\middleware\EventHandler;..\BSP\DS1302;..\USER\timer) DEBUG OBJECT
                    -EXTEND PRINT(.\Listings\lcd1602.lst) OBJECT(.\Objects\lcd1602.obj)

line level    source

   1          /*
   2           * @Author: liubotao
   3           * @Date: 2022-10-30 15:02:33
   4           * @LastEditors: liubotao
   5           * @LastEditTime: 2022-11-27 18:47:25
   6           * @FilePath: \test_51\BSP\bsp_lcd1602\lcd1602.c
   7           * @Description: 
   8           * 
   9           */
  10          #include "lcd1602.h"
  11          #include "intrins.h"
  12          // void Delay200us()            //@12.000MHz
  13          // {
  14          //      unsigned char i;
  15          
  16          
  17          //      _nop_();
  18          //      i = 10;
  19          //      while (--i);
  20          // }
  21          void readBusy()           
  22          {
  23   1          uint8_t sta;      
  24   1          LCD1602_DB = 0xff;
  25   1          LCD1602_RS = 0;
  26   1          LCD1602_RW = 1;
  27   1          do
  28   1          {
  29   2              LCD1602_EN = 1;
  30   2              sta = LCD1602_DB;
  31   2              LCD1602_EN = 0;    
  32   2          }while(sta & 0x80);
  33   1      }
  34          
  35          void lcd1602WriteCmd(uint8_t cmd)     
  36          {
  37   1          readBusy();
  38   1          LCD1602_RS = 0;
  39   1          LCD1602_RW = 0;
  40   1          LCD1602_DB = cmd;
  41   1          LCD1602_EN = 1;
  42   1          LCD1602_EN = 0;    
  43   1      }
  44          
  45          void lcd1602WriteData(uint8_t dat)   
  46          {
  47   1            readBusy();
  48   1            LCD1602_RS = 1;
  49   1            LCD1602_RW = 0;
  50   1            LCD1602_DB = dat;
  51   1            LCD1602_EN = 1;
  52   1            LCD1602_EN = 0;
  53   1      }
C51 COMPILER V9.60.0.0   LCD1602                                                           11/27/2022 18:47:33 PAGE 2   

  54          
  55          void lcdSetCursor(uint8_t x,uint8_t y)  
  56          {
  57   1          uint8_t addr;
  58   1          if(y == 0)
  59   1              addr = 0x00 + x;
  60   1          else
  61   1              addr = 0x40 + x;
  62   1          
  63   1          lcd1602WriteCmd(addr|0x80);
  64   1      }
  65          
  66          void LcdShowStr(uint8_t x,uint8_t y,uint8_t *str)     
  67          {
  68   1          lcd1602WriteCmd(0x0c);
  69   1          lcdSetCursor(x,y);      
  70   1          while(*str != '\0')
  71   1          {
  72   2              lcd1602WriteData(*str++);
  73   2          }
  74   1      }
  75          
  76          void currsorBlinks(uint8_t x, uint8_t y, uint8_t mode)
  77          {
  78   1          lcdSetCursor(x, y);
  79   1          if (mode == 1)
  80   1              lcd1602WriteCmd(0x0f);
  81   1          else
  82   1              lcd1602WriteCmd(0x0c);
  83   1      }
  84          
  85          void initLcd1602()              
  86          {
  87   1          lcd1602WriteCmd(0x38);    
  88   1          lcd1602WriteCmd(0x0c);
  89   1          lcd1602WriteCmd(0x06);
  90   1          lcd1602WriteCmd(0x01);   
  91   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    155    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       3
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
